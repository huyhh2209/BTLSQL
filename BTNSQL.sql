create database BTLQLNV

USE BTLQLNV
GO

CREATE TABLE NHANVIEN(
	MANHANVIEN NVARCHAR(30 )PRIMARY KEY ,
	HOTEN NVARCHAR(50) NOT NULL,
	GIOITINH CHAR(4),CHECK(GIOITINH IN ('NAM','NU')), 
	NGAYSINH DATE,
	NNVIEC DATE,
	DIACHI NVARCHAR(30),
	SDT int,
	BANGCAP NVARCHAR(30),
	PHG NVARCHAR(30 ),
	CHUCVU NVARCHAR(30),
)
GO

CREATE TABLE PHONGBAN(
	MAPHONG NVARCHAR(30)PRIMARY KEY, 
	TENPHONG NVARCHAR(50) NOT NULL,
	SOPHONG NVARCHAR(12),
)
GO

CREATE TABLE DUAN(
	MADUAN NVARCHAR(30)PRIMARY KEY, 
	TENDUAN NVARCHAR(50) NOT NULL,
	MUCDAUTU INT,
)
GO
CREATE TABLE DAMNHIEM(
	MADUAN NVARCHAR(30) ,
	MAPHONG NVARCHAR(30) ,
	PRIMARY KEY(MADUAN,MAPHONG),
	FOREIGN KEY (MADUAN) REFERENCES DUAN(MADUAN),
    FOREIGN KEY (MAPHONG) REFERENCES PHONGBAN(MAPHONG),
	)

GO

CREATE TABLE DANHGIA(
	MAPHONG NVARCHAR(30) ,
	MADUAN NVARCHAR (30),
	XEPLOAI NVARCHAR (30),
	PRIMARY KEY(MADUAN),
	FOREIGN KEY (MAPHONG) REFERENCES PHONGBAN(MAPHONG),
	FOREIGN KEY (MADUAN) REFERENCES DUAN(MADUAN),
	)
GO
CREATE TABLE KETQUA(
	MAPHONG NVARCHAR(30) ,
	MADUAN NVARCHAR(30) NOT NULL,
	DOANHTHU int,
	PRIMARY KEY(MADUAN),
	FOREIGN KEY (MADUAN) REFERENCES DUAN(MADUAN),
	FOREIGN KEY (MAPHONG) REFERENCES PHONGBAN(MAPHONG),
	)
GO

CREATE TABLE QLCONGTAC(
	MANHANVIEN NVARCHAR(30 ) PRIMARY KEY,
	NGAYDI date,
	NGAYVE date,
	NOICONGTAC NVARCHAR(30),
	MADUAN NVARCHAR(30),
	FOREIGN KEY (MANHANVIEN) REFERENCES NHANVIEN(MANHANVIEN),
	FOREIGN KEY (MADUAN) REFERENCES DUAN(MADUAN),
)
GO

drop table LUONG
CREATE TABLE LUONG(
	MANHANVIEN NVARCHAR(30 ) PRIMARY KEY,
	LUONGCOBAN INT ,
	HESOLUONG float,
	FOREIGN KEY (MANHANVIEN) REFERENCES NHANVIEN(MANHANVIEN),
	)




--------------------------------Nhân Viên---------------------------------------
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('121001', N'Trần Quang Huy', 'NAM', '11/11/2000',' 06/06/2015', N'Q1-HCM', N'Tiến Sĩ', 0776105566,'KT1', N'Trưởng Phòng')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('122002', N'Nguyễn Đan Khánh', N'NU', '02/12/2000', '04/06/2017', N'Bình Thạnh-HCM', N'Kĩ Sư', 0776905566,'KT1', N'Nhân Viên')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('122003', N'Trần Mai Phương', N'NU', '04/05/1999', '02/06/2016', N'Q10-HCM', N'Kĩ Sư',0776139966 ,'KT1', N'Nhân Viên')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('111001', N'Phùng Thanh Độ', 'NAM', '12/09/1989', '08/07/2016', N'Q10-HCM', N'Thạc Sĩ', 0776159977, 'KD1', N'Trưởng Phòng' )
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('112002', N'Hoàng Thái Bảo', 'NAM', '12/11/1999', '10/06/2018',N'Q2-HCM', N'Cử Nhân', 0776188877	 , 'KD1', N'Nhân Viên' )
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('112003', N'Phạm Đức Huy', 'NAM', '09/05/1998', '12/05/2017', N'Q9-HCM', N'Cử Nhân', 0776178877	, 'KD1', N'Nhân Viên' )
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('112004', N'Phạm Minh Giang', N'NU', '12/08/1999',' 11/06/2017', N'Tân Bình-HCM', N'Cử Nhân',0776102266	, 'KD1', N'Nhân Viên')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('132001', N'Nhạc Thuận Thiên', N'NAM', '11/08/1998',' 12/06/2018', N'Q7-HCM', N'Kĩ Sư',0776959966, 'TK1', N'Nhân Viên')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('132002', N'Ngô Thị Quỳnh Như', N'NU', '11/05/1991',' 12/02/2017', N'Q5-HCM', N'Kĩ Sư',0776985577	, 'TK1', N'Nhân Viên')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('132003', N'Đỗ Ngọc Mỹ', N'NU', '12/02/1992',' 10/08/2018', N'Q1-HCM', N'Kĩ Sư',0776725577, 'TK1', N'Nhân Viên')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('132004', N'Quách Thành Vũ', N'NAM', '05/01/1991',' 12/06/2017', N'Q6-HCM', N'Tiến Sĩ',0776695577, 'TK1', N'Trưởng Phòng')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,SDT,PHG,CHUCVU) VALUES
('132005', N'Lê Thị Mộng', N'NU', '03/01/1996',' 09/06/2016', N'Q3-HCM', N'Kĩ Sư',0776973366, 'TK1', N'Nhân Viên')


-------------------------------Phòng Ban -----------------------------------------
Insert into PHONGBAN( MAPHONG,SOPHONG, TENPHONG) values
('KD1', '110', N'KINH DOANH' )
Insert into PHONGBAN( MAPHONG,SOPHONG, TENPHONG) values 
('KT1', '120', N'KỸ THUẬT')
Insert into PHONGBAN( MAPHONG,SOPHONG, TENPHONG) values 
('TK1', '130', N'THIẾT KẾ')

------------------------------Dự Án----------------------------------------------
Insert into DUAN(MADUAN,TENDUAN,MUCDAUTU) values
('1001','MILO', 40000000)
Insert into DUAN(MADUAN,TENDUAN,MUCDAUTU) values
('1002','COFFE',10000000)
Insert into DUAN(MADUAN,TENDUAN,MUCDAUTU) values
('1003','GAME',50000000)
Insert into DUAN(MADUAN,TENDUAN,MUCDAUTU) values
('1004','OREO',45000000)
Insert into DUAN(MADUAN,TENDUAN,MUCDAUTU) values
('1005','IPHONE',90000000)
Insert into DUAN(MADUAN,TENDUAN,MUCDAUTU) values
('1006','LANDMARK',80000000)

-------------------------------Đảm Nhiệm -----------------------------------------
Insert into DAMNHIEM( MAPHONG, MADUAN) values
('KD1', '1001'  )
Insert into DAMNHIEM( MAPHONG, MADUAN) values
('KD1', '1002' )
Insert into DAMNHIEM( MAPHONG, MADUAN) values
('KT1', '1003' )
Insert into DAMNHIEM( MAPHONG, MADUAN) values
('TK1', '1004' )
Insert into DAMNHIEM( MAPHONG, MADUAN) values
('TK1', '1005' )
Insert into DAMNHIEM( MAPHONG, MADUAN) values
('TK1', '1006' )

-------------------------------Quân Lý Công Tác--------------------------------------
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('111001','02/01/2020', '03/01/2020', N'Bà Rịa - Vũng Tàu','1001')
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('112003','05/25/2020', '07/07/2020', N'Nha Trang','1001')
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('112002','03/25/2020', '05/07/2020', N'Hà Nội','1002')
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('122003','06/05/2020', '09/08/2020', N'Bạc Liêu','1003')
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('122002','01/01/2020', '02/05/2020', N'Phú Quốc','1003')
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('132004','05/05/2020', '07/23/2020', N'Hà Nội','1004')
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('132005','10/02/2020', '12/30/2020', N'Quảng Ngải','1004')
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('132002','10/05/2020', '11/04/2020', N'Khánh Hòa','1006')
Insert into QLCONGTAC(MANHANVIEN,NGAYDI,NGAYVE,NOICONGTAC,MADUAN) VALUES
('132001','9/08/2020', '11/02/2020', N'Tây Nguyên','1004')

----------------------------Đánh giá-------------------------------------------
Insert into DANHGIA(XEPLOAI,MAPHONG,MADUAN) values
(N'Chưa Tốt','KD1', '1001')
Insert into DANHGIA(XEPLOAI,MAPHONG,MADUAN) values
(N'Tốt','KD1', '1002')
Insert into DANHGIA(XEPLOAI,MAPHONG,MADUAN) values
(N'Tôt','KT1', '1003')
Insert into DANHGIA(XEPLOAI,MAPHONG,MADUAN) values
(N'Chưa Tốt','TK1', '1004')
Insert into DANHGIA(XEPLOAI,MAPHONG,MADUAN) values
(N'Tôt','TK1', '1005')
Insert into DANHGIA(XEPLOAI,MAPHONG,MADUAN) values
(N'Tốt','TK1', '1006')


-----------------------------Kết Quả--------------------------------------------
Insert into KETQUA(MADUAN,MAPHONG,DOANHTHU) values
('1001','KD1',100000000)
Insert into KETQUA(MADUAN,MAPHONG,DOANHTHU) values
('1002','KD1',150000000)
Insert into KETQUA(MADUAN,MAPHONG,DOANHTHU) values
('1003','KT1',200000000)
Insert into KETQUA(MADUAN,MAPHONG,DOANHTHU) values
('1004','TK1',90000000)
Insert into KETQUA(MADUAN,MAPHONG,DOANHTHU) values
('1005','TK1',250000000)
Insert into KETQUA(MADUAN,MAPHONG,DOANHTHU) values
('1006','TK1',300000000)

---------------------------------Lương nhân viên-------------------------

Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('121001',4420000,5.58)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('122002',4420000,2.34)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('122003',4420000,2.34)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('111001',4420000,4)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('112002',4420000,2.34)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('112003',4420000,2.34)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('112004',4420000,2.34)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('132001',4420000,2.34)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('132002',4420000,2.34)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('132003',4420000,2.34)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('132004',4420000,5.58)
Insert into LUONG(MANHANVIEN,LUONGCOBAN,HESOLUONG)values
('132005',4420000,2.34)




