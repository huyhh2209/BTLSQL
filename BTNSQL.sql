create database BTLQLNV

USE BTLQLNV
GO

CREATE TABLE NHANVIEN(
	MANHANVIEN NVARCHAR(30 )PRIMARY KEY ,
	HOTEN NVARCHAR(50) NOT NULL,
	GIOITINH CHAR(4),CHECK(GIOITINH IN ('NAM','NU')), 
	NGAYSINH DATE,
	NNVIEC DATE,
	DIACHI NVARCHAR(30),
	BANGCAP NVARCHAR(30),
	LUONGNV MONEY,
	PHG NVARCHAR(30 ),
)
GO

CREATE TABLE PHONGBAN(
	MAPHONG NVARCHAR(30)PRIMARY KEY, 
	TENPHONG NVARCHAR(50) NOT NULL,
	SOPHONG NVARCHAR(12),
)
GO

CREATE TABLE DUAN(
	TENDUAN NVARCHAR(30 ) PRIMARY KEY,
	DONVIDAMNHIEM NVARCHAR(30),
	
)
GO

CREATE TABLE TRUONGPHONG(
	MANHANVIEN NVARCHAR(30) ,
	MAPHONG NVARCHAR(30) ,
	TENPHONG NVARCHAR(20),
	PRIMARY KEY(MANHANVIEN,MAPHONG),
	FOREIGN KEY (MANHANVIEN) REFERENCES NHANVIEN(MANHANVIEN),
    FOREIGN KEY (MAPHONG) REFERENCES PHONGBAN(MAPHONG),
	)

GO

CREATE TABLE DANHGIA(
	MAPHONG NVARCHAR(30) ,
	THUONG MONEY,
	PRIMARY KEY(MAPHONG),
	FOREIGN KEY (MAPHONG) REFERENCES PHONGBAN(MAPHONG),
	)
GO


CREATE TABLE KETQUA(
	MAPHONG NVARCHAR(30) ,
	TENDUAN NVARCHAR(30) NOT NULL,
	DOANHTHU MONEY,
	PRIMARY KEY(TENDUAN),
	FOREIGN KEY (TENDUAN) REFERENCES DUAN(TENDUAN),
	FOREIGN KEY (MAPHONG) REFERENCES PHONGBAN(MAPHONG),
	)



--------------------------------Nhân Viên---------------------------------------
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,LUONGNV,PHG) VALUES
('121001', N'Trần Quang Huy', 'NAM', '11/11/2000',' 06/06/2015', N'Q1-HCM', N'Tiến Sĩ', 20000000,'KT1')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,LUONGNV,PHG) VALUES
('122002', N'Nguyễn Đan Khánh', 'NU', '02/12/2000', '04/06/2019', N'Bình Thạnh-HCM', N'Kĩ Sư', 8000000,'KT1')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,LUONGNV,PHG) VALUES
('122003', N'Trần Mai Phương', 'NU', '04/05/1999', '02/06/2019', N'Q10-HCM', N'Kĩ Sư',7500000 ,'KT1')
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,LUONGNV,PHG) VALUES
('111001', N'Phùng Thanh Độ', 'NAM', '12/09/1989', '08/07/2016', N'Q10-HCM', N'Thạc Sĩ', 12000000, 'KD1' )
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,LUONGNV,PHG) values
('112002', N'Hoàng Thái Bảo', 'NAM', '12/11/1999', '10/06/2019',N'Q2-HCM', N'Cử Nhân', 7000000 , 'KD1' )
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,LUONGNV,PHG) VALUES
('112003', N'Phạm Đức Huy', 'NAM', '09/05/1998', '12/05/2019', N'Q9-HCM', N'Cử Nhân', 8000000, 'KD1' )
Insert into NHANVIEN(MANHANVIEN,HOTEN,GIOITINH,NGAYSINH,NNVIEC,DIACHI,BANGCAP,LUONGNV,PHG) VALUES
('112004', N'Phạm Minh Giang', 'NU', '12/08/1999',' 11/06/2019', N'Tân Bình-HCM', N'Cử Nhân',7500000, 'KD1')





-------------------------------Phòng Ban -----------------------------------------
Insert into PHONGBAN( MAPHONG,SOPHONG, TENPHONG) values
('KD1', '110', N'KINH DOANH' )
Insert into PHONGBAN( MAPHONG,SOPHONG, TENPHONG) values 
('KT1', '120', N'KỸ THUẬT')



-------------------------------Trưởng phòng--------------------------------------
Insert into TRUONGPHONG(MANHANVIEN,MAPHONG,TENPHONG) VALUES
('111001','KD1', N'KINH DOANH')
Insert into TRUONGPHONG(MANHANVIEN,MAPHONG,TENPHONG) VALUES
('121001','KT1', N'KỸ THUẬT' )



------------------------------Dự Án----------------------------------------------
Insert into DUAN(TENDUAN,DONVIDAMNHIEM) values
('MILO','KD1')
Insert into DUAN(TENDUAN,DONVIDAMNHIEM) values
('COFFE','KD1')
Insert into DUAN(TENDUAN,DONVIDAMNHIEM) values
('GAME','KT1')


----------------------------Đánh giá-------------------------------------------
Insert into DANHGIA(THUONG,MAPHONG) values
(8000000,'KD1')
Insert into DANHGIA(THUONG,MAPHONG) values
(3500000,'KT1')



-----------------------------Kết Quả--------------------------------------------
Insert into KETQUA(TENDUAN,MAPHONG,DOANHTHU) values
('MILO','KD1',500000000)
Insert into KETQUA(TENDUAN,MAPHONG,DOANHTHU) values
('COFFE','KD1',400000000)
Insert into KETQUA(TENDUAN,MAPHONG,DOANHTHU) values
('GAME','KT1',700000000)

SELECT * 
FROM NHANVIEN


